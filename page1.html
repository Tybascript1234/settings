<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>اشترك معنا</title>
    <link rel="icon" href="https://cdn-icons-png.flaticon.com/256/3177/3177440.png">
    <link href="https://fonts.googleapis.com/css2?family=Amiri:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200">
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<!-- نموذج الاشتراك -->
<div class="ccit">
    <div class="rr">
        <div class="ccit-logo favicon-container" id="image-container"></div>
        <div class="ol" style="text-align: left;">
            <div class="ddf">
                <span class="texte" id="link-container">اشترك معنا</span>
                <br>
                <span>Use your Google account</span>
                <br>
                <span class="xo">Company development <a target="_blank" href="https://creativecloudsit.com/?srsltid=AfmBOorlFy4ViheQyEqYm7Fw2OvcAIVXcs0oBi03aTFWmcdB8PXOZYiH">Creative Clouds IT</a></span>
            </div>
            <div class="ol-div2 k2" style="left: auto;right: 0;width: -webkit-fill-available;">
                <div style="display: flex;">
                    <a class="ol-button vv wave-button" target="_blank" id="backButton" onclick="goBack()"><ion-icon name="arrow-back-outline"></ion-icon></a>
                    <a class="ol-button vv wave-button" onclick="window.open('mailto:sales@creativecloudsit.com', '_blank')"><ion-icon style="color: #ea4335;" name="mail"></ion-icon></a>
                    <a class="ol-button vv wave-button" onclick="window.open('https://www.linkedin.com/company/creative-clouds-it', '_blank')"><ion-icon style="color: #0077b5;" name="logo-linkedin"></ion-icon></a>
                    <a class="ol-button vv wave-button" onclick="window.open('https://wa.me/966598080208?text=Im%20interested%20in%20your%20services.', '_blank')"><ion-icon style="color: #24cc63;" name="logo-whatsapp"></ion-icon></a>
                    <div class="Languag">
                        <a class="ol-button vv wave-button" id="toggleButton"><svg xmlns="http://www.w3.org/2000/svg" class="ionicon" viewBox="0 0 512 512"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M48 112h288M192 64v48M272 448l96-224 96 224M301.5 384h133M281.3 112S257 206 199 277 80 384 80 384"/><path d="M256 336s-35-27-72-75-56-85-56-85" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"/></svg></a>
                        <ul class="ooo" id="myDiv">
                            <script src="https://tybascript1234.github.io/Languag/embed.js"></script>
                            <div id="target-container"></div>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <form class="ol" id="registrationForm">
            <div class="ol-div">
                <input id="name" type="text" name="name" placeholder="Enter name" required>
                <input id="email" type="email" name="email" placeholder="Enter your email" required>
                <input id="password" type="password" name="message" placeholder="Enter password" required>
            </div>
            <div class="ol-div2 k1" style="width: -webkit-fill-available;">
                <div style="display: flex;">
                    <input type="file" id="file" style="display: none;" name="file">
                    <label for="file" class="ol-div2-button wave-button" id="fileLabel">Attach file</label>
                    <button class="ol-div2-button2" type="submit">Subscribe</button>
                </div>
            </div>
        </form>
    </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", function () {
    const backButton = document.getElementById("backButton");

    if (window.history.length <= 1) {
        backButton.style.display = "none"; // إخفاء الزر
    }
});

function goBack() {
    if (window.history.length > 1) {
        window.history.back();
    }
}
</script>

<script>
    
const button = document.getElementById('toggleButton');
        const myDiv = document.getElementById('myDiv');

        button.addEventListener('click', function(event) {
            myDiv.style.display = 'block';
            event.stopPropagation(); // لمنع تنفيذ الحدث في العنصر الأب
        });

        document.addEventListener('click', function(event) {
            if (!myDiv.contains(event.target) && event.target !== button) {
                myDiv.style.display = 'none';
            }
});
</script>

<script>
// معالجة إرسال النموذج
document.getElementById('registrationForm').addEventListener('submit', function(event) {
    event.preventDefault(); // منع الإرسال التقليدي للنموذج

    // استرجاع القيم المدخلة من النموذج
    const name = document.getElementById('name').value;
    const email = document.getElementById('email').value;
    const password = document.getElementById('password').value;
    const file = document.getElementById('file').files[0] ? document.getElementById('file').files[0].name : '';
    const link = document.getElementById('linkInput') ? document.getElementById('linkInput').value : ''; // الرابط المدخل

    // التحقق إذا كان الرابط رابط صورة
    let isImage = false;
    if (link) {
        const imageExtensions = ['.jpg', '.jpeg', '.png', '.gif'];
        isImage = imageExtensions.some(extension => link.toLowerCase().endsWith(extension));
    }

    // الحصول على الوقت الحالي
    const time = new Date().toLocaleString();

    // إنشاء الكائن الذي يحتوي على البيانات
    const formData = {
        name: name,
        email: email,
        password: password,
        file: file,
        link: link, // إضافة الرابط
        isImage: isImage, // تحديد إذا كان الرابط صورة
        time: time
    };

    // استرجاع البيانات من localStorage أو تهيئتها كقائمة فارغة
    const data = JSON.parse(localStorage.getItem('formData')) || [];

    // إضافة البيانات الجديدة إلى البيانات الموجودة
    data.push(formData);

    // تخزين البيانات في localStorage
    localStorage.setItem('formData', JSON.stringify(data));

    // إعادة تعيين النموذج
    document.getElementById('registrationForm').reset();
    alert('تم إرسال البيانات بنجاح!');
});

// إظهار رسالة لاختيار وضع رفع الملف
document.getElementById('fileLabel').addEventListener('click', function() {
    const choice = confirm("هل ترغب في رفع ملف من الكمبيوتر أم إدخال رابط؟");
    if (choice) {
        // عند اختيار رفع ملف، سيتم تفعيل الإدخال لكن لا يظهر الـ input بشكل مرئي
        document.getElementById('file').click();  // يحاكي الضغط على زر رفع الملف
        alert("يمكنك الآن اختيار ملف من جهاز الكمبيوتر.");
    } else {
        // إدخال رابط
        const link = prompt("يرجى إدخال الرابط:");
        if (link) {
            // إنشاء حقل نصي لإدخال الرابط وإضافته إلى النموذج
            let linkInput = document.createElement('input');
            linkInput.id = 'linkInput';
            linkInput.type = 'text';
            linkInput.value = link;
            linkInput.placeholder = 'رابط المدخل';
            document.querySelector('#registrationForm').appendChild(linkInput); // إضافة الحقل إلى النموذج
            alert("تم إدخال الرابط بنجاح!");
        }
    }
});
</script>


<script>
   // تخزين الروابط والصور وأسماء المواقع في مصفوفة
   const sites = [
      {
        name: "Quran recited",  // إضافة اسم الموقع
        link: "https://tybascript1234.github.io/Qr-1/",
        imageUrl: "image/New Project.png"
      },
       {
        name: "Quran recited",  //   
        link: "file:///android_asset/index.html",
        imageUrl: "image/New Project.png"
      },
      {
        name: "PDF عرض ملف",  // إضافة اسم الموقع
        link: "https://tybascript1234.github.io/PDF/",
        imageUrl: "image/Logo.png"
      },
      {
        name: "Canyon Icon",  // إضافة اسم الموقع
        link: "https://tybascript1234.github.io/iconcanyon/",
        imageUrl: "image/screen.png"
      },
      {
        name: "Canyon Icon",  // إضافة اسم الموقع
        link: "https://tybascript1234.github.io/Canyon-icon/",
        imageUrl: "image/screen.png"
      }
      // يمكنك إضافة المزيد من المواقع هنا
    ];

    // دالة للبحث عن الموقع الذي كان الرابط السابق له
    function getSiteInfoFromReferrer() {
      const referrer = document.referrer; // الحصول على الرابط السابق
      const site = sites.find(site => referrer.includes(site.link)); // البحث عن الموقع الذي يتطابق مع الرابط السابق
      return site;
    }

    // دالة لإضافة اسم الموقع بناءً على الرابط السابق
    function displayLink() {
      const site = getSiteInfoFromReferrer(); // الحصول على معلومات الموقع بناءً على الرابط السابق
      const linkContainer = document.getElementById('link-container');
      linkContainer.innerHTML = ''; // مسح المحتوى القديم

      if (site) {
        const siteName = document.createElement('span');
        siteName.textContent = `${site.name}`; // عرض اسم الموقع
        linkContainer.appendChild(siteName);
      } else {
        linkContainer.textContent = 'Unknown location'; // إذا لم يتم العثور على الموقع
      }
    }

    // دالة لإضافة الصورة بناءً على الرابط السابق
    function displayImage() {
      const site = getSiteInfoFromReferrer(); // الحصول على معلومات الموقع بناءً على الرابط السابق
      const imageContainer = document.getElementById('image-container');
      imageContainer.innerHTML = ''; // مسح المحتوى القديم

      if (site) {
        const siteImage = document.createElement('img');
        siteImage.src = site.imageUrl; // صورة الموقع
        siteImage.alt = `${site.name}`;
        imageContainer.appendChild(siteImage);
      } else {
        imageContainer.textContent = 'لا توجد صورة للموقع'; // إذا لم يتم العثور على الموقع
      }
    }

    // استدعاء الدوال لعرض اسم الموقع والصورة بناءً على الرابط السابق
    displayLink();
    displayImage();

</script>

</body>
</html>
